# Chamada Visual - Col√©gio Carbonell

O sistema **Chamada Visual** √© uma aplica√ß√£o web desenvolvida para otimizar o processo de chamada de alunos no Col√©gio Carbonell. A ferramenta permite que usu√°rios autorizados busquem alunos em tempo real e os enviem para um painel de exibi√ß√£o, que √© atualizado instantaneamente para todos que o estiverem visualizando.

## üöÄ Funcionalidades Principais

*   **Autentica√ß√£o Segura:** Login exclusivo para usu√°rios com contas de e-mail do dom√≠nio `@colegiocarbonell.com.br` atrav√©s do Google (OAuth 2.0).
*   **Busca de Alunos:** Integra√ß√£o com a API do sistema de gest√£o Sophia para buscar alunos por nome.
*   **Filtros Inteligentes:** A busca pode ser filtrada por segmentos: Educa√ß√£o Infantil (EI), Anos Iniciais (AI) e Anos Finais (AF).
*   **Terminal de Chamada:** Uma interface simples onde o usu√°rio busca o aluno e, com um clique, o "chama".
*   **Painel em Tempo Real:** Uma tela de exibi√ß√£o (ideal para TVs e monitores) que mostra os alunos chamados. O painel √© atualizado para todos os clientes conectados em tempo real usando o Firebase Firestore.
*   **Notifica√ß√£o Sonora:** O painel emite um som de notifica√ß√£o sempre que um novo aluno √© adicionado.
*   **Busca por Voz:** O terminal possui um bot√£o para realizar buscas de alunos utilizando o microfone (Web Speech API).
*   **Limpeza Autom√°tica:** O painel remove automaticamente os alunos ap√≥s um per√≠odo de inatividade (10 minutos) e a lista se limita aos √∫ltimos 10 alunos chamados para manter a clareza.

## üõ†Ô∏è Tecnologias Utilizadas

*   **Backend:** Python, Flask, Gunicorn, Authlib
*   **Frontend:** HTML5, CSS3, JavaScript (ES6 Modules)
*   **Servi√ßos:** Google Cloud App Engine, Google OAuth, Firebase Firestore

## ‚öôÔ∏è Configura√ß√£o e Instala√ß√£o

Siga os passos abaixo para configurar e rodar o projeto em um ambiente de desenvolvimento local.

### 1. Pr√©-requisitos

*   Python 3.8 ou superior
*   Conta do Google para autentica√ß√£o
*   Um projeto no Google Cloud com o App Engine e a API do Identity Platform ativadas.
*   Um projeto no Firebase com o Firestore habilitado.

### 2. Instala√ß√£o

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone https://github.com/seu-usuario/chamada-visual.git
    cd chamada-visual
    ```

2.  **Crie e ative um ambiente virtual:**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # No Windows, use `venv\Scripts\activate`
    ```

3.  **Instale as depend√™ncias:**
    ```bash
    pip install -r requirements.txt
    ```

### 3. Configura√ß√£o do Ambiente

1.  **Crie um arquivo `.env`** na raiz do projeto. Este arquivo armazenar√° suas chaves de API e outras configura√ß√µes sens√≠veis.

2.  **Adicione as seguintes vari√°veis de ambiente ao arquivo `.env`:**

    ```dotenv
    # Chave secreta para a sess√£o do Flask (pode ser qualquer string aleat√≥ria)
    SECRET_KEY='sua_chave_secreta_aqui'

    # Credenciais do Google OAuth 2.0
    # Obtenha no console do Google Cloud em "APIs e Servi√ßos" > "Credenciais"
    GOOGLE_CLIENT_ID='seu-client-id.apps.googleusercontent.com'
    GOOGLE_CLIENT_SECRET='seu-client-secret'

    # Credenciais da API do sistema Sophia
    SOPHIA_TENANT='seu_tenant_sophia'
    SOPHIA_USER='seu_usuario_sophia'
    SOPHIA_PASSWORD='sua_senha_sophia'
    SOPHIA_API_HOSTNAME='api.sophia.com.br' # Exemplo
    ```

### 4. Configura√ß√£o do Firebase

1.  V√° para o seu projeto no [console do Firebase](https://console.firebase.google.com/).
2.  Nas configura√ß√µes do projeto, na aba "Geral", adicione um novo aplicativo Web.
3.  O Firebase fornecer√° um objeto de configura√ß√£o `firebaseConfig`.
4.  Abra o arquivo `static/firebase-config.js`.
5.  **Substitua o valor da `apiKey`** no objeto `firebaseConfig` pela chave de API fornecida pelo Firebase. As outras chaves geralmente j√° v√™m pr√©-configuradas corretamente.

    ```javascript
    // static/firebase-config.js
    const firebaseConfig = {
        apiKey: "SUA_API_KEY_DO_FIREBASE", // <-- COLOQUE SUA CHAVE AQUI
        authDomain: "chamada-visual-carbonell.firebaseapp.com",
        projectId: "chamada-visual-carbonell",
        storageBucket: "chamada-visual-carbonell.appspot.com",
        messagingSenderId: "230654155076",
        appId: "1:230654155076:web:8d37de62797f65d2265f11"
    };
    ```

### 5. Rodando a Aplica√ß√£o

Com o ambiente virtual ativado e as vari√°veis de ambiente configuradas, inicie a aplica√ß√£o com o Flask:

```bash
flask run
```

Acesse a aplica√ß√£o em `http://127.0.0.1:5000` no seu navegador.

## üöÄ Deploy

Este projeto est√° configurado para ser implantado no Google Cloud App Engine. O arquivo `app.yaml` (n√£o inclu√≠do neste reposit√≥rio base) e o `requirements.txt` s√£o usados pelo App Engine para o deploy.

---

*Desenvolvido por: Thiago Marques*
